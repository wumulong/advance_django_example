(function(){var t,e,n,r,o,i,u,s,a,l,c,h,d,p,f,m,v,y,g,w,b,E,T,k,_,S,A,H,C,R,x,N,L,O,q,F,P,D,M,X,j,B,I,G,U,Q,V,$,K,Y,z,J,W,Z,tt,et,nt,rt,ot,it,ut,st,at,lt=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},ct=function(t,e){function n(){this.constructor=t}for(var r in e)ht.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},ht={}.hasOwnProperty,dt=[].slice,pt=function(t,e){return function(){return t.apply(e,arguments)}};F={},d=10,nt=!1,J=!0,j=null,g=null,N=null,G=null,at=null,r={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",AFTER_REMOVE:"page:after-remove"},k=function(t,e){var r;return null==e&&(e={}),t=new n(t),K(),h(),null!=j&&j.start(),nt&&(r=rt(t.absolute))?(_(r),e.showProgressBar=!1,S(t,e)):(e.onLoadFunction=Z,S(t,e))},rt=function(t){var e;return e=F[t],e&&!e.transitionCacheDisabled?e:void 0},b=function(t){return null==t&&(t=!0),nt=t},w=function(t){return null==t&&(t=!0),J=!t,t},S=function(t,e){return null==e.cacheRequest&&(e.cacheRequest=J),null==e.showProgressBar&&(e.showProgressBar=!0),ot(r.FETCH,{url:t.absolute}),null!=at&&at.abort(),at=new XMLHttpRequest,at.open("GET",t.formatForXHR({cache:e.cacheRequest}),!0),at.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),at.setRequestHeader("X-XHR-Referer",G),at.onload=function(){var n;return ot(r.RECEIVE,{url:t.absolute}),(n=X())?(U(t),Q(),p(n,e),e.showProgressBar&&null!=j&&j.done(),L(),"function"==typeof e.onLoadFunction&&e.onLoadFunction(),ot(r.LOAD)):(null!=j&&j.done(),document.location.href=y()||t.absolute)},j&&e.showProgressBar&&(at.onprogress=function(t){return function(t){var e;return e=t.lengthComputable?t.loaded/t.total*100:j.value+(100-j.value)/10,j.advanceTo(e)}}(this)),at.onloadend=function(){return at=null},at.onerror=function(){return document.location.href=t.absolute},at.send()},_=function(t){return null!=at&&at.abort(),p(v(t.body),{title:t.title,runScripts:!1}),null!=j&&j.done(),B(t),ot(r.RESTORE)},h=function(){var t;return t=new n(g.url),F[t.absolute]={url:t.relative,body:document.body.outerHTML,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},m(d)},D=function(t){return null==t&&(t=d),/^[\d]+$/.test(t)?d=parseInt(t):void 0},m=function(t){var e,n,r,o,i,u;for(i=Object.keys(F),e=i.map(function(t){return F[t].cachedAt}).sort(function(t,e){return e-t}),u=[],n=0,o=i.length;o>n;n++)r=i[n],F[r].cachedAt<=e[t]&&u.push(delete F[r]);return u},z=function(t,e){return null==e&&(e={}),p(v(t),e)},p=function(e,n){var o,i,u,s,a,l,c;return s=T(e),c=s[0],l=s[1],o=s[2],null==c&&(c=n.title),ot(r.BEFORE_UNLOAD),document.title=c,n.change?(et(l,A(document.body,"[data-turbolinks-temporary]"),{keep:!1}),et(l,H(document.body,n.change),{keep:!1})):(n.flush||(u=A(document.body,"[data-turbolinks-permanent]"),n.keep&&u.push.apply(u,H(document.body,n.keep)),et(l,u,{keep:!0})),i=document.documentElement.replaceChild(l,document.body),q(i),null!=o&&t.update(o),tt()),a=n.runScripts===!1?'script[data-turbolinks-eval="always"]':'script:not([data-turbolinks-eval="false"])',E(a),g=window.history.state,ot(r.CHANGE),ot(r.UPDATE)},A=function(t,e){return Array.prototype.slice.apply(t.querySelectorAll(e))},H=function(t,e){var n,r,o,i,u;for(i=[],u=Array.isArray(e)?e:[e],n=0,o=u.length;o>n;n++)r=u[n],i.push.apply(i,A(t,'[id^="'+r+':"], [id="'+r+'"]'));return i},et=function(t,e,n){var r,o,i,u,s;for(o=0,i=e.length;i>o;o++){if(r=e[o],!(u=r.getAttribute("id")))throw new Error("Turbolinks partial replace: turbolinks elements must have an id.");(s=t.querySelector('[id="'+u+'"]'))&&(n.keep?(r.parentNode.insertBefore(r.cloneNode(!0),r),t.ownerDocument.adoptNode(r),s.parentNode.replaceChild(r,s)):(s=s.cloneNode(!0),r.parentNode.replaceChild(s,r),q(r)))}},q=function(t){return"undefined"!=typeof jQuery&&jQuery(t).remove(),ot(r.AFTER_REMOVE,t)},E=function(t){var e,n,r,o,i,u,s,a,l,c,h,d;for(d=document.body.querySelectorAll(t),r=0,i=d.length;i>r;r++)if(h=d[r],""===(l=h.type)||"text/javascript"===l){for(n=document.createElement("script"),c=h.attributes,o=0,u=c.length;u>o;o++)e=c[o],n.setAttribute(e.name,e.value);h.hasAttribute("async")||(n.async=!1),n.appendChild(document.createTextNode(h.innerHTML)),a=h.parentNode,s=h.nextSibling,a.removeChild(h),a.insertBefore(n,s)}},Y=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},tt=function(){var t,e;return t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1],t&&document.activeElement!==t?t.focus():void 0},U=function(t){return(t=new n(t)).absolute!==G?window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute):void 0},Q=function(){var t,e;return(t=at.getResponseHeader("X-XHR-Redirected-To"))?(t=new n(t),e=t.hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",t.href+e)):void 0},y=function(){var t;return null!=(t=at.getResponseHeader("Location"))&&new n(t).crossOrigin()?t:void 0},K=function(){return G=document.location.href},$=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},V=function(){return g=window.history.state},L=function(){var t;return navigator.userAgent.match(/Firefox/)&&!(t=new n).hasNoHash()?(window.history.replaceState(g,"",t.withoutHash()),document.location.hash=t.hash):void 0},B=function(t){return window.scrollTo(t.positionX,t.positionY)},Z=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},f=function(t){var e,n,r;if(null==t||"object"!=typeof t)return t;e=new t.constructor;for(n in t)r=t[n],e[n]=f(r);return e},M=function(t){var e,n;return n=(null!=(e=document.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",n},ut=function(){return(new Date).getTime().toString(36)},ot=function(t,e){var n;return"undefined"!=typeof Prototype&&Event.fire(document,t,e,!0),n=document.createEvent("Events"),e&&(n.data=e),n.initEvent(t,!0,!0),document.dispatchEvent(n)},P=function(t){return!ot(r.BEFORE_CHANGE,{url:t})},X=function(){var t,e,n,r,o,i,u;return e=function(){var t;return 400<=(t=at.status)&&600>t},u=function(){var t;return null!=(t=at.getResponseHeader("Content-Type"))&&t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},r=function(){var t;return null!=(t=at.getResponseHeader("Content-Disposition"))&&t.match(/^attachment/)},o=function(t){var e,n,r,o,i;for(o=t.querySelector("head").childNodes,i=[],e=0,n=o.length;n>e;e++)r=o[e],null!=("function"==typeof r.getAttribute?r.getAttribute("data-turbolinks-track"):void 0)&&i.push(r.getAttribute("src")||r.getAttribute("href"));return i},t=function(t){var e;return N||(N=o(document)),e=o(t),e.length!==N.length||i(e,N).length!==N.length},i=function(t,e){var n,r,o,i,u;for(t.length>e.length&&(o=[e,t],t=o[0],e=o[1]),i=[],n=0,r=t.length;r>n;n++)u=t[n],lt.call(e,u)>=0&&i.push(u);return i},e()||!u()||r()||(n=v(at.responseText),!n||t(n))?void 0:n},T=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,Y(e.querySelector("body")),t.get(e).token]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},v=function(t){var e;return e=document.documentElement.cloneNode(),e.innerHTML=t,e.head=e.querySelector("head"),e.body=e.querySelector("body"),e},n=function(){function t(e){return this.original=null!=e?e:document.location.href,this.original.constructor===t?this.original:void this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype.crossOrigin=function(){return this.origin!==(new t).origin},t.prototype.formatForXHR=function(t){return null==t&&(t={}),(t.cache?this:this.withAntiCacheParam()).withoutHashForIE10compatibility()},t.prototype.withAntiCacheParam=function(){return new t(/([?&])_=[^&]*/.test(this.absolute)?this.absolute.replace(/([?&])_=[^&]*/,"$1_="+ut()):new t(this.absolute+(/\?/.test(this.absolute)?"&":"?")+("_="+ut())))},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),o=function(t){function e(t){return this.link=t,this.link.constructor===e?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void e.__super__.constructor.apply(this,arguments))}return ct(e,t),e.HTML_EXTENSIONS=["html"],e.allowExtensions=function(){var t,n,r,o;for(n=1<=arguments.length?dt.call(arguments,0):[],r=0,o=n.length;o>r;r++)t=n[r],e.HTML_EXTENSIONS.push(t);return e.HTML_EXTENSIONS},e.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},e.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new n).withoutHash()},e.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+e.HTML_EXTENSIONS.join("|")+")?$","g"))},e.prototype._optOut=function(){var t,e;for(e=this.originalElement;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},e.prototype._target=function(){return 0!==this.link.target.length},e}(n),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(P(this.link.absolute)||st(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1))},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return"A"===t.nodeName&&0!==t.href.length?this.link=new o(t):void 0},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),i=function(){function t(t){this.elementSelector=t,this._trickle=pt(this._trickle,this),this._reset=pt(this._reset,this),this.value=0,this.content="",this.speed=300,this.opacity=n,this.install()}var e,n;return e="turbolinks-progress-bar",n=.99,t.enable=function(){return null!=j?j:j=new t("html")},t.disable=function(){return null!=j&&j.uninstall(),j=null},t.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(e),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},t.prototype.uninstall=function(){return this.element.classList.remove(e),document.head.removeChild(this.styleElement)},t.prototype.start=function(){return this.value>0&&(this._reset(),this._reflow()),this.advanceTo(5)},t.prototype.advanceTo=function(t){var e;if(t>(e=this.value)&&100>=e){if(this.value=t,this._updateStyle(),100===this.value)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},t.prototype.done=function(){return this.value>0?(this.advanceTo(100),this._finish()):void 0},t.prototype._finish=function(){return this.fadeTimer=setTimeout(function(t){return function(){return t.opacity=0,t._updateStyle()}}(this),this.speed/2),this.resetTimer=setTimeout(this._reset,this.speed)},t.prototype._reflow=function(){return this.element.offsetHeight},t.prototype._reset=function(){return this._stopTimers(),this.value=0,this.opacity=n,this._withSpeed(0,function(t){return function(){return t._updateStyle(!0)}}(this))},t.prototype._stopTimers=function(){return this._stopTrickle(),clearTimeout(this.fadeTimer),clearTimeout(this.resetTimer)},t.prototype._startTrickle=function(){return this.trickleTimer?void 0:this.trickleTimer=setTimeout(this._trickle,this.speed)},t.prototype._stopTrickle=function(){return clearTimeout(this.trickleTimer),delete this.trickleTimer},t.prototype._trickle=function(){return this.advanceTo(this.value+Math.random()/2),this.trickleTimer=setTimeout(this._trickle,this.speed)},t.prototype._withSpeed=function(t,e){var n,r;return n=this.speed,this.speed=t,r=e(),this.speed=n,r},t.prototype._updateStyle=function(t){return null==t&&(t=!1),t&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},t.prototype._changeContentToForceRepaint=function(){return this.content=""===this.content?" ":""},t.prototype._createCSSRule=function(){return this.elementSelector+"."+e+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+this.value+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},t}(),u={enable:i.enable,disable:i.disable,start:function(){return i.enable().start()},advanceTo:function(t){return null!=j?j.advanceTo(t):void 0},done:function(){return null!=j?j.done():void 0}},R=function(){return document.addEventListener("DOMContentLoaded",function(){return ot(r.CHANGE),ot(r.UPDATE)},!0)},x=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e,n){return jQuery.trim(e.responseText)?ot(r.UPDATE):void 0}):void 0},O=function(t){var e,r;return(null!=(r=t.state)?r.turbolinks:void 0)&&t.state.url!==g.url?(e=F[new n(t.state.url).absolute])?(h(),_(e)):st(t.target.location.href):void 0},C=function(){return $(),V(),i.enable(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(t){return $(),V()},!1),window.addEventListener("popstate",O,!1)},l=window.history&&"pushState"in window.history,it=navigator.userAgent,s=(-1!==it.indexOf("Android 2.")||-1!==it.indexOf("Android 4.0"))&&-1!==it.indexOf("Mobile Safari")&&-1===it.indexOf("Chrome")&&-1===it.indexOf("Windows Phone"),W="GET"===(I=M("request_method"))||""===I,c=l&&!s&&W,a=document.addEventListener&&document.createEvent,a&&(R(),x()),c?(st=k,C()):st=function(t){return document.location.href=t},this.Turbolinks={visit:st,replace:z,pagesCached:D,cacheCurrentPage:h,enableTransitionCache:b,disableRequestCaching:w,ProgressBar:u,allowLinkExtensions:o.allowExtensions,supported:c,EVENTS:f(r)}}).call(this);
